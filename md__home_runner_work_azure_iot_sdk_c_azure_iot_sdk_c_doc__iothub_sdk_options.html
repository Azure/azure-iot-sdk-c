<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azure IoT C SDK: IoT Hub C SDK Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azure IoT C SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">IoT Hub C SDK Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes how you can set options for the Azure IoT Hub and Device Provisioning Service (DPS) client connections.</p>
<ul>
<li><a href="#iot-hub-c-sdk-options">IoT Hub C SDK Options</a><ul>
<li><a href="#example-code-for-setting-an-option">Example Code for Setting an Option</a></li>
<li><a href="#when-to-set-options">When to Set Options</a></li>
<li><a href="#common-transport-options">Common Transport Options</a></li>
<li><a href="#iot-hub-device-and-module-client-options">IoT Hub Device and Module Client Options</a></li>
<li><a href="#mqtt-amqp-and-http-specific-protocol-options">MQTT, AMQP, and HTTP Specific Protocol Options</a><ul>
<li><a href="#mqtt-specific-options">MQTT Specific Options</a></li>
<li><a href="#amqp-specific-options">AMQP Specific Options</a></li>
<li><a href="#http-specific-options">HTTP Specific Options</a></li>
</ul>
</li>
<li><a href="#device-provisioning-service-dps-client-options">Device Provisioning Service (DPS) Client Options</a></li>
<li><a href="#file-upload-options">File Upload Options</a></li>
<li><a href="#batching-and-iot-hub-client-sdk">Batching and IoT Hub Client SDK</a></li>
<li><a href="#advanced-compilation-options">Advanced Compilation Options</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md112"></a>
Example Code for Setting an Option</h1>
<p>You will use a different API to set options, depending on whether you are using a device or module identity and whether you are using the convenience or lower layer APIs. The pattern is generally the same.</p>
<div class="fragment"><div class="line"><span class="comment">// Convenience layer for device client</span></div>
<div class="line"><a class="code" href="iothub__client__core__common_8h.html#ae8e8840cc715c54bc60465f3f110d40f">IOTHUB_CLIENT_RESULT</a> <a class="code" href="iothub__device__client_8h.html#abde0ae9b104a57268e63e91e0dc2534f">IoTHubDeviceClient_SetOption</a>(<a class="code" href="iothub__device__client_8h.html#ac0a6393bbcbec2e1b580e8c4c127f4c1">IOTHUB_DEVICE_CLIENT_HANDLE</a> iotHubClientHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* optionName, <span class="keyword">const</span> <span class="keywordtype">void</span>* value);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Lower layer for device client</span></div>
<div class="line"><a class="code" href="iothub__client__core__common_8h.html#ae8e8840cc715c54bc60465f3f110d40f">IOTHUB_CLIENT_RESULT</a> <a class="code" href="iothub__device__client__ll_8h.html#a23a4b07e54e7e03668dc9f832cd06368">IoTHubDeviceClient_LL_SetOption</a>(<a class="code" href="iothub__device__client__ll_8h.html#ab3ed1ccac784de53579181b349fd6616">IOTHUB_DEVICE_CLIENT_LL_HANDLE</a> iotHubClientHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* optionName, <span class="keyword">const</span> <span class="keywordtype">void</span>* value);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Convenience layer for module client</span></div>
<div class="line"><a class="code" href="iothub__client__core__common_8h.html#ae8e8840cc715c54bc60465f3f110d40f">IOTHUB_CLIENT_RESULT</a> <a class="code" href="iothub__module__client_8h.html#a8778c5207e84af1048d92ed4af6105c2">IoTHubModuleClient_SetOption</a>(<a class="code" href="iothub__module__client_8h.html#a61259310a513ae73b31cb3c66d3f4087">IOTHUB_MODULE_CLIENT_HANDLE</a> iotHubModuleClientHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* optionName, <span class="keyword">const</span> <span class="keywordtype">void</span>* value);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Lower layer for module client</span></div>
<div class="line"><a class="code" href="iothub__client__core__common_8h.html#ae8e8840cc715c54bc60465f3f110d40f">IOTHUB_CLIENT_RESULT</a> <a class="code" href="iothub__module__client__ll_8h.html#adb6c8f4bfd2c26200580f04dabcfd132">IoTHubModuleClient_LL_SetOption</a>(<a class="code" href="iothub__module__client__ll_8h.html#ae1a6187aacbdb56cde026ad3d228420a">IOTHUB_MODULE_CLIENT_LL_HANDLE</a> iotHubModuleClientHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* optionName, <span class="keyword">const</span> <span class="keywordtype">void</span>* value);</div>
<div class="ttc" id="aiothub__client__core__common_8h_html_ae8e8840cc715c54bc60465f3f110d40f"><div class="ttname"><a href="iothub__client__core__common_8h.html#ae8e8840cc715c54bc60465f3f110d40f">IOTHUB_CLIENT_RESULT</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT</div><div class="ttdoc">Enumeration specifying the status of calls to IoT Hub client.</div><div class="ttdef"><b>Definition:</b> iothub_client_core_common.h:42</div></div>
<div class="ttc" id="aiothub__device__client_8h_html_abde0ae9b104a57268e63e91e0dc2534f"><div class="ttname"><a href="iothub__device__client_8h.html#abde0ae9b104a57268e63e91e0dc2534f">IoTHubDeviceClient_SetOption</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubDeviceClient_SetOption(IOTHUB_DEVICE_CLIENT_HANDLE iotHubClientHandle, const char *optionName, const void *value)</div><div class="ttdoc">This API sets a runtime option identified by parameter optionName to a value pointed to by value....</div></div>
<div class="ttc" id="aiothub__device__client_8h_html_ac0a6393bbcbec2e1b580e8c4c127f4c1"><div class="ttname"><a href="iothub__device__client_8h.html#ac0a6393bbcbec2e1b580e8c4c127f4c1">IOTHUB_DEVICE_CLIENT_HANDLE</a></div><div class="ttdeci">IOTHUB_CLIENT_CORE_HANDLE IOTHUB_DEVICE_CLIENT_HANDLE</div><div class="ttdoc">Handle corresponding to a convenience layer device client instance.</div><div class="ttdef"><b>Definition:</b> iothub_device_client.h:33</div></div>
<div class="ttc" id="aiothub__device__client__ll_8h_html_a23a4b07e54e7e03668dc9f832cd06368"><div class="ttname"><a href="iothub__device__client__ll_8h.html#a23a4b07e54e7e03668dc9f832cd06368">IoTHubDeviceClient_LL_SetOption</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubDeviceClient_LL_SetOption(IOTHUB_DEVICE_CLIENT_LL_HANDLE iotHubClientHandle, const char *optionName, const void *value)</div><div class="ttdoc">This API sets a runtime option identified by parameter optionName to a value pointed to by value....</div></div>
<div class="ttc" id="aiothub__device__client__ll_8h_html_ab3ed1ccac784de53579181b349fd6616"><div class="ttname"><a href="iothub__device__client__ll_8h.html#ab3ed1ccac784de53579181b349fd6616">IOTHUB_DEVICE_CLIENT_LL_HANDLE</a></div><div class="ttdeci">struct IOTHUB_CLIENT_CORE_LL_HANDLE_DATA_TAG * IOTHUB_DEVICE_CLIENT_LL_HANDLE</div><div class="ttdoc">Handle corresponding to a lower layer (LL) device client instance.</div><div class="ttdef"><b>Definition:</b> iothub_device_client_ll.h:49</div></div>
<div class="ttc" id="aiothub__module__client_8h_html_a61259310a513ae73b31cb3c66d3f4087"><div class="ttname"><a href="iothub__module__client_8h.html#a61259310a513ae73b31cb3c66d3f4087">IOTHUB_MODULE_CLIENT_HANDLE</a></div><div class="ttdeci">IOTHUB_CLIENT_CORE_HANDLE IOTHUB_MODULE_CLIENT_HANDLE</div><div class="ttdoc">Handle corresponding to a convenience layer module client instance.</div><div class="ttdef"><b>Definition:</b> iothub_module_client.h:33</div></div>
<div class="ttc" id="aiothub__module__client_8h_html_a8778c5207e84af1048d92ed4af6105c2"><div class="ttname"><a href="iothub__module__client_8h.html#a8778c5207e84af1048d92ed4af6105c2">IoTHubModuleClient_SetOption</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubModuleClient_SetOption(IOTHUB_MODULE_CLIENT_HANDLE iotHubModuleClientHandle, const char *optionName, const void *value)</div><div class="ttdoc">This API sets a runtime option identified by parameter optionName to a value pointed to by value....</div></div>
<div class="ttc" id="aiothub__module__client__ll_8h_html_adb6c8f4bfd2c26200580f04dabcfd132"><div class="ttname"><a href="iothub__module__client__ll_8h.html#adb6c8f4bfd2c26200580f04dabcfd132">IoTHubModuleClient_LL_SetOption</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubModuleClient_LL_SetOption(IOTHUB_MODULE_CLIENT_LL_HANDLE iotHubModuleClientHandle, const char *optionName, const void *value)</div><div class="ttdoc">This API sets a runtime option identified by parameter optionName to a value pointed to by value....</div></div>
<div class="ttc" id="aiothub__module__client__ll_8h_html_ae1a6187aacbdb56cde026ad3d228420a"><div class="ttname"><a href="iothub__module__client__ll_8h.html#ae1a6187aacbdb56cde026ad3d228420a">IOTHUB_MODULE_CLIENT_LL_HANDLE</a></div><div class="ttdeci">struct IOTHUB_MODULE_CLIENT_LL_HANDLE_DATA_TAG * IOTHUB_MODULE_CLIENT_LL_HANDLE</div><div class="ttdoc">Handle corresponding to a lower layer (LL) module client instance.</div><div class="ttdef"><b>Definition:</b> iothub_module_client_ll.h:47</div></div>
</div><!-- fragment --><p>An example of setting an option:</p>
<div class="fragment"><div class="line"><span class="comment">// IoT Hub Device Client</span></div>
<div class="line"><span class="keywordtype">bool</span> trace_on = <span class="keyword">true</span>;</div>
<div class="line"><a class="code" href="iothub__device__client_8h.html#abde0ae9b104a57268e63e91e0dc2534f">IoTHubDeviceClient_SetOption</a>(sdk_handle, OPTION_LOG_TRACE, &amp;trace_on);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Device Provisioning Service (DPS) Client</span></div>
<div class="line">HTTP_PROXY_OPTIONS http_proxy;</div>
<div class="line">memset(&amp;http_proxy, 0, <span class="keyword">sizeof</span>(HTTP_PROXY_OPTIONS));</div>
<div class="line">http_proxy.host_address = PROXY_ADDRESS;</div>
<div class="line">http_proxy.port = PROXY_PORT;</div>
<div class="line"><a class="code" href="prov__device__ll__client_8h.html#ae5035b58c14ec28a988f90eee182f0fd">Prov_Device_LL_SetOption</a>(handle, OPTION_HTTP_PROXY, &amp;http_proxy);</div>
<div class="ttc" id="aprov__device__ll__client_8h_html_ae5035b58c14ec28a988f90eee182f0fd"><div class="ttname"><a href="prov__device__ll__client_8h.html#ae5035b58c14ec28a988f90eee182f0fd">Prov_Device_LL_SetOption</a></div><div class="ttdeci">PROV_DEVICE_RESULT Prov_Device_LL_SetOption(PROV_DEVICE_LL_HANDLE handle, const char *optionName, const void *value)</div><div class="ttdoc">API sets a runtime option identified by parameter optionName to a value pointed to by value.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md113"></a>
When to Set Options</h1>
<p>You should set the options you need right after creating your IoT Hub device or module handle. Setting most options after the connection has been initiated may be silently ignored or applied much later. Many of these are used at connection initiation time itself.</p>
<h1><a class="anchor" id="autotoc_md114"></a>
Common Transport Options</h1>
<p>You can use the options below for the IoT Hub Device Client, the IoT Hub Module Client, and for the Device Provisioning Client. These options are declared in <a href="https://github.com/Azure/azure-c-shared-utility/blob/master/inc/azure_c_shared_utility/shared_util_options.h">shared_util_options.h</a>.</p>
<p><b>NOTE: Uploading files to Azure (e.g. IoTHubDeviceClient_UploadToBlobAsync) does not support this complete set of options. See <a href="#upload-options">here</a> for more.</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Value Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"TrustedCerts"</code>   </td><td class="markdownTableBodyNone">OPTION_TRUSTED_CERT   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Azure Server certificate used to validate TLS connection to IoT Hub. This is usually not required on operating systems that have built in certificates to trust, such as Windows and some Linux distributions. A typical use case is on an embedded system which does not trust any certificates or when connecting to a gateway whose certificates that are not otherwise trusted. See <a href="https://github.com/Azure/azure-iot-sdk-c/tree/main/iothub_client/samples/iotedge_downstream_device_sample">here</a> for a gateway sample.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"x509certificate"</code>   </td><td class="markdownTableBodyNone">SU_OPTION_X509_CERT   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Sets an RSA x509 certificate used for connection authentication. (Also available from <a href="https://github.com/Azure/azure-iot-sdk-c/blob/main/iothub_client/inc/iothub_client_options.h">iothub_client_options.h</a> as <code>OPTION_X509_CERT</code>.)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"x509privatekey"</code>   </td><td class="markdownTableBodyNone">SU_OPTION_X509_PRIVATE_KEY   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Sets the private key for the RSA x509 certificate. (Also available from <a href="https://github.com/Azure/azure-iot-sdk-c/blob/main/iothub_client/inc/iothub_client_options.h">iothub_client_options.h</a> as <code>OPTION_X509_PRIVATE_KEY</code>.)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"x509EccCertificate"</code>   </td><td class="markdownTableBodyNone">OPTION_X509_ECC_CERT   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Sets the ECC x509 certificate used for connection authentication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"x509EccAliasKey"</code>   </td><td class="markdownTableBodyNone">OPTION_X509_ECC_KEY   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Sets the private key for the ECC x509 certificate    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"proxy_data"</code>   </td><td class="markdownTableBodyNone">OPTION_HTTP_PROXY   </td><td class="markdownTableBodyNone"><a href="https://github.com/Azure/azure-c-shared-utility/blob/master/inc/azure_c_shared_utility/shared_util_options.h">HTTP_PROXY_OPTIONS*</a>   </td><td class="markdownTableBodyNone">Http proxy data object used for proxy connection to IoT Hub (HTTP-only, HTTPS proxy is not supported)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"tls_version"</code>   </td><td class="markdownTableBodyNone">OPTION_TLS_VERSION   </td><td class="markdownTableBodyNone">int*   </td><td class="markdownTableBodyNone">TLS version to use for openssl, 10 for version 1.0, 11 for version 1.1, 12 for version 1.2. (<b>DEPRECATED</b>: TLS 1.0 and 1.1 are not secure and should not be used. This option is included only for backward compatibility.)   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md115"></a>
IoT Hub Device and Module Client Options</h1>
<p>You can use the options below for IoT Hub connections. These options are declared in <a href="https://github.com/Azure/azure-iot-sdk-c/blob/main/iothub_client/inc/iothub_client_options.h">iothub_client_options.h</a>. <br  />
</p>
<p>You may also use <a href="#general_options">common transport options</a> options.</p>
<p><b>NOTE: Uploading files to Azure (e.g. IoTHubDeviceClient_UploadToBlobAsync) does not support this complete set of options. See <a href="#upload-options">here</a> for more.</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Value Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"logtrace"</code>   </td><td class="markdownTableBodyNone">OPTION_LOG_TRACE   </td><td class="markdownTableBodyNone">bool*   </td><td class="markdownTableBodyNone">Turn on and off log tracing for the transport    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"messageTimeout"</code>   </td><td class="markdownTableBodyNone">OPTION_MESSAGE_TIMEOUT   </td><td class="markdownTableBodyNone">tickcounter_ms_t*   </td><td class="markdownTableBodyNone">(DEPRECATED) Timeout used for message on the message queue    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"product_info"</code>   </td><td class="markdownTableBodyNone">OPTION_PRODUCT_INFO   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">User defined Product identifier sent to the IoT Hub service    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"retry_interval_sec"</code>   </td><td class="markdownTableBodyNone">OPTION_RETRY_INTERVAL_SEC   </td><td class="markdownTableBodyNone">unsigned int*   </td><td class="markdownTableBodyNone">Number of seconds between retries when using the interval retry policy. (Not supported for HTTP transport.)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"retry_max_delay_secs"</code>   </td><td class="markdownTableBodyNone">OPTION_RETRY_MAX_DELAY_SECS   </td><td class="markdownTableBodyNone">unsigned int*   </td><td class="markdownTableBodyNone">Maximum number of seconds a retry delay when using linear backoff, exponential backoff, or exponential backoff with jitter policy. (Not supported for HTTP transport.)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"sas_token_lifetime"</code>   </td><td class="markdownTableBodyNone">OPTION_SAS_TOKEN_LIFETIME   </td><td class="markdownTableBodyNone">size_t*   </td><td class="markdownTableBodyNone">Length of time in seconds used for lifetime of SAS token.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"do_work_freq_ms"</code>   </td><td class="markdownTableBodyNone">OPTION_DO_WORK_FREQUENCY_IN_MS   </td><td class="markdownTableBodyNone"><a href="https://github.com/Azure/azure-c-shared-utility/blob/master/inc/azure_c_shared_utility/tickcounter.h">tickcounter_ms_t *</a>   </td><td class="markdownTableBodyNone">Specifies how frequently the worker thread spun by the convenience layer will wake up, in milliseconds. The default is 1 millisecond. The maximum allowable value is 100. (Convenience layer APIs only)   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md116"></a>
MQTT, AMQP, and HTTP Specific Protocol Options</h1>
<p>Some options are only supported by a given protocol (e.g. MQTT, AMQP, HTTP). These are declared in <a href="https://github.com/Azure/azure-iot-sdk-c/blob/main/iothub_client/inc/iothub_client_options.h">iothub_client_options.h</a>.</p>
<h2><a class="anchor" id="autotoc_md117"></a>
MQTT Specific Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Value Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"auto_url_encode_decode"</code>   </td><td class="markdownTableBodyNone">OPTION_AUTO_URL_ENCODE_DECODE   </td><td class="markdownTableBodyNone">bool*   </td><td class="markdownTableBodyNone">Turn on and off automatic URL Encoding and Decoding. <b>You are strongly encouraged to set this to true.</b> If you do not do so and send a property with a character that needs URL encoding to the server, it will result in hard to diagnose problems. The SDK cannot auto-enable this feature because it needs to maintain backwards compatibility with applications already doing their own URL encoding.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"keepalive"</code>   </td><td class="markdownTableBodyNone">OPTION_KEEP_ALIVE   </td><td class="markdownTableBodyNone">int*   </td><td class="markdownTableBodyNone">Length of time to send <code>Keep Alives</code> to service for D2C Messages    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"model_id"</code>   </td><td class="markdownTableBodyNone">OPTION_MODEL_ID   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone"><a href="https://aka.ms/iotpnp">IoT Plug and Play</a> model ID the device or module implements   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md118"></a>
AMQP Specific Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Value Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"cbs_request_timeout"</code>   </td><td class="markdownTableBodyNone">OPTION_CBS_REQUEST_TIMEOUT   </td><td class="markdownTableBodyNone">size_t*   </td><td class="markdownTableBodyNone">Number of seconds to wait for a CBS request to complete    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"sas_token_refresh_time"</code>   </td><td class="markdownTableBodyNone">OPTION_SAS_TOKEN_REFRESH_TIME   </td><td class="markdownTableBodyNone">size_t*   </td><td class="markdownTableBodyNone">Frequency in seconds that the SAS token is refreshed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"event_send_timeout_secs"</code>   </td><td class="markdownTableBodyNone">OPTION_EVENT_SEND_TIMEOUT_SECS   </td><td class="markdownTableBodyNone">size_t*   </td><td class="markdownTableBodyNone">Number of seconds to wait for telemetry message to complete    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"c2d_keep_alive_freq_secs"</code>   </td><td class="markdownTableBodyNone">OPTION_C2D_KEEP_ALIVE_FREQ_SECS   </td><td class="markdownTableBodyNone">size_t*   </td><td class="markdownTableBodyNone">Informs service of maximum period the client waits for keep-alive message   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md119"></a>
HTTP Specific Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Value Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"Batching"</code>   </td><td class="markdownTableBodyNone">OPTION_BATCHING   </td><td class="markdownTableBodyNone">bool*   </td><td class="markdownTableBodyNone">Turn on and off message batching    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"MinimumPollingTime"</code>   </td><td class="markdownTableBodyNone">OPTION_MIN_POLLING_TIME   </td><td class="markdownTableBodyNone">unsigned int*   </td><td class="markdownTableBodyNone">Minimum time in seconds allowed between 2 consecutive GET issues to the service    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"timeout"</code>   </td><td class="markdownTableBodyNone">OPTION_HTTP_TIMEOUT   </td><td class="markdownTableBodyNone">long*   </td><td class="markdownTableBodyNone">When using curl the amount of time before the request times out, defaults to 242 seconds.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md120"></a>
Device Provisioning Service (DPS) Client Options</h1>
<p>You can use the options below to configure the DPS client. These are defined in <a href="https://github.com/Azure/azure-iot-sdk-c/blob/main/provisioning_client/inc/azure_prov_client/prov_device_ll_client.h">prov_device_ll_client.h</a> except for <code>PROV_OPTION_DO_WORK_FREQUENCY_IN_MS</code> which is defined in <a href="https://github.com/Azure/azure-iot-sdk-c/blob/main/provisioning_client/inc/azure_prov_client/prov_device_client.h">prov_device_client.h</a>.</p>
<p>You may also use <a href="#general_options">common transport options</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Value Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"logtrace"</code>   </td><td class="markdownTableBodyNone">PROV_OPTION_LOG_TRACE   </td><td class="markdownTableBodyNone">bool*   </td><td class="markdownTableBodyNone">Turn on and off log tracing for the transport    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"registration_id"</code>   </td><td class="markdownTableBodyNone">PROV_REGISTRATION_ID   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">The registration ID of the device.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"provisioning_timeout"</code>   </td><td class="markdownTableBodyNone">PROV_OPTION_TIMEOUT   </td><td class="markdownTableBodyNone">long*   </td><td class="markdownTableBodyNone">Maximum time to allow DPS to complete, in seconds.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"do_work_freq_ms"</code>   </td><td class="markdownTableBodyNone">PROV_OPTION_DO_WORK_FREQUENCY_IN_MS   </td><td class="markdownTableBodyNone">uint16_t *   </td><td class="markdownTableBodyNone">Specifies how frequently the worker thread spun by the convenience layer will wake up, in milliseconds. The default is 1 millisecond. (Convenience layer APIs only)   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md121"></a>
File Upload Options</h1>
<p>When you upload files to Azure with APIs like <code>IoTHubDeviceClient_LL_UploadToBlob</code>, most of the options described above are silently ignored. This is even though these APIs use the same IoT Hub handle as used for telemetry, device methods, and device twin. The reason the options are different is because the underlying transport is implemented differently for uploads.</p>
<p>The following options are supported when performing file uploads. They are declared in <a href="https://github.com/Azure/azure-iot-sdk-c/blob/main/iothub_client/inc/iothub_client_options.h">iothub_client_options.h</a> and in <a href="https://github.com/Azure/azure-c-shared-utility/blob/master/inc/azure_c_shared_utility/shared_util_options.h">shared_util_options.h</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Value Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"blob_upload_timeout_secs"</code>   </td><td class="markdownTableBodyNone">OPTION_BLOB_UPLOAD_TIMEOUT_SECS   </td><td class="markdownTableBodyNone">size_t*   </td><td class="markdownTableBodyNone">Timeout in seconds of initial connection establishment to IoT Hub. NOTE: This does not specify the end-to-end time of the upload, which is currently not configurable.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"CURLOPT_VERBOSE"</code>   </td><td class="markdownTableBodyNone">OPTION_CURL_VERBOSE   </td><td class="markdownTableBodyNone">bool*   </td><td class="markdownTableBodyNone">Turn on and off verbosity at curl level. (Only available when using curl as underlying HTTP client.)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"x509certificate"</code>   </td><td class="markdownTableBodyNone">OPTION_X509_CERT   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Sets an RSA x509 certificate used for connection authentication    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"x509privatekey"</code>   </td><td class="markdownTableBodyNone">OPTION_X509_PRIVATE_KEY   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Sets the private key for the RSA x509 certificate    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"TrustedCerts"</code>   </td><td class="markdownTableBodyNone">OPTION_TRUSTED_CERT   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Azure Server certificate used to validate TLS connection to IoT Hub and Azure Storage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"proxy_data"</code>   </td><td class="markdownTableBodyNone">OPTION_HTTP_PROXY   </td><td class="markdownTableBodyNone"><a href="https://github.com/Azure/azure-c-shared-utility/blob/master/inc/azure_c_shared_utility/shared_util_options.h">HTTP_PROXY_OPTIONS*</a>   </td><td class="markdownTableBodyNone">Http proxy data object used for proxy connection to IoT Hub and Azure Storage (HTTP-only, HTTPS proxy is not supported)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"network_interface_upload_to_blob"</code>   </td><td class="markdownTableBodyNone">OPTION_NETWORK_INTERFACE_UPLOAD_TO_BLOB   </td><td class="markdownTableBodyNone">const char*   </td><td class="markdownTableBodyNone">Set the interface name to use as outgoing network interface for upload to blob. NOTE: Not all HTTP clients support this option. It is currently only supported when using cURL.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>"blob_upload_tls_renegotiation"</code>   </td><td class="markdownTableBodyNone">OPTION_BLOB_UPLOAD_TLS_RENEGOTIATION   </td><td class="markdownTableBodyNone">bool*   </td><td class="markdownTableBodyNone"><em><a href="https://github.com/Azure/azure-c-shared-utility/blob/master/devdoc/httpapi_compact_requirements.md">HTTP Compact</a> only; not supported when using other HTTP stacks such as cURL and WinHTTP.</em> Tells HTTP stack to enable TLS renegotiation when using client certificates. Non-HTTP Compact stacks will use their defaults for this.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md122"></a>
Batching and IoT Hub Client SDK</h1>
<p>Batching is the ability of a protocol to send multiple messages in one payload, rather than one at a time. This can result in less overhead, especially when sending multiple, small messages. This SDK supports various levels of batching when using IoTHubClient_LL_SendEventAsync.</p>
<ul>
<li>AMQP uses batching always.</li>
<li>HTTP can optionally enable batching, using the "Batching" option.</li>
<li>MQTT does not have a batching option.</li>
</ul>
<p>None of the protocols has a windowing or Nagling concept. They do NOT wait a certain amount of time to attempt to queue up multiple messages to put into a single batch. Instead, they just batch whatever is on the to-send queue. For customers using the lower-layer protocols (LL), they can force batching by performing multiple <code>IoTHubDeviceClient_LL_SendEventAsync</code> calls before <code>IoTHubDeviceClient_LL_DoWork</code>.</p>
<div class="fragment"><div class="line"><a class="code" href="iothub__device__client__ll_8h.html#ab3ed1ccac784de53579181b349fd6616">IOTHUB_DEVICE_CLIENT_LL_HANDLE</a> iotHubClientHandle;</div>
<div class="line"><span class="comment">// Queues msg1 to be sent but does not perform any network I/O</span></div>
<div class="line"><a class="code" href="iothub__device__client__ll_8h.html#a56cfcb637e1f46cf0f5e6e2bb81457ad">IoTHubDeviceClient_LL_SendEventAsync</a>(iotHubClientHandle, msg1, ...);</div>
<div class="line"><span class="comment">// Queues msg2 to be sent but does not perform any network I/O</span></div>
<div class="line"><a class="code" href="iothub__device__client__ll_8h.html#a56cfcb637e1f46cf0f5e6e2bb81457ad">IoTHubDeviceClient_LL_SendEventAsync</a>(iotHubClientHandle, msg2, ...);</div>
<div class="line"><span class="comment">// Performs network I/O.  If batching is enabled, the SDK will batch msg1 and msg2</span></div>
<div class="line"><a class="code" href="iothub__device__client__ll_8h.html#a6e77da5502dff2bb43bace5173242f37">IoTHubDeviceClient_LL_DoWork</a>(iotHubClientHandle);</div>
<div class="ttc" id="aiothub__device__client__ll_8h_html_a56cfcb637e1f46cf0f5e6e2bb81457ad"><div class="ttname"><a href="iothub__device__client__ll_8h.html#a56cfcb637e1f46cf0f5e6e2bb81457ad">IoTHubDeviceClient_LL_SendEventAsync</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubDeviceClient_LL_SendEventAsync(IOTHUB_DEVICE_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_MESSAGE_HANDLE eventMessageHandle, IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK eventConfirmationCallback, void *userContextCallback)</div><div class="ttdoc">Asynchronous call to send the message specified by eventMessageHandle.</div></div>
<div class="ttc" id="aiothub__device__client__ll_8h_html_a6e77da5502dff2bb43bace5173242f37"><div class="ttname"><a href="iothub__device__client__ll_8h.html#a6e77da5502dff2bb43bace5173242f37">IoTHubDeviceClient_LL_DoWork</a></div><div class="ttdeci">void IoTHubDeviceClient_LL_DoWork(IOTHUB_DEVICE_CLIENT_LL_HANDLE iotHubClientHandle)</div><div class="ttdoc">This function MUST be called by the user so work (sending/receiving data on the network,...</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md123"></a>
Advanced Compilation Options</h1>
<p>We recommend leaving the following settings at their defaults. Tuning them may allow optimizations for specific devices or scenarios but could also negatively impact RAM or EEPROM usage. The options are presented only as compilation flags and must be appended to the CMake <code>compileOption_C</code> setting:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option Name   </th><th class="markdownTableHeadNone">Option Define   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>"XIO Receive Buffer"</code>   </td><td class="markdownTableBodyNone"><code>-DcompileOption_C="-DXIO_RECEIVE_BUFFER_SIZE=&lt;value&gt;"</code>   </td><td class="markdownTableBodyNone">Configure the internal XIO receive buffer.   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
