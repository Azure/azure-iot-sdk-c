name: $(BuildID)_$(BuildDefinitionName)_$(SourceBranchName)_$(Date:yyyyMMdd)$(Rev:.r)
resources:
- repo: self
  clean: true
phases:
- phase: iotz
  queue:
    name: mxchip-c
  steps:
  - script: |
      npm install iotz
      node_modules\.bin\iotz update
      git clone https://github.com/obastemur/mxchip_az3166_firmware.git mxchip
      cd mxchip
      ..\node_modules\.bin\iotz init mbed
      ..\node_modules\.bin\iotz compile
    displayName: 'build'
  - script: |
      copy BUILD\AZ3166\GCC_ARM\mxchip.bin j: 
    displayName: 'deploy'
